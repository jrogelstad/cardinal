[ 
    {
        "name": "Kind",
        "plural": "Kinds",
        "module": "Common",
        "description": "Base class for physical types",
        "properties": {
            "code": {
                "description": "Natural key",
                "type": "string",
                "isUnique": true,
                "isRequired": true
            },
            "description": {
                "description": "Description",
                "type": "string"
            },
            "note": {
                "description": "Note",
                "type": "string"
            },
            "type": {
                "description": "Kind type",
                "type": "string",
                "default": "Asset"
            }
        }
    },
    {
        "name": "Unit",
        "plural": "Units",
        "module": "Common",
        "description": "Unit of measure",
        "inherits": "Kind"
    },
    {
        "name": "Element",
        "plural": "Elements",
        "module": "Common",
        "description": "Unit of measure",
        "inherits": "Kind"
    },
    {
        "name": "Container",
        "plural": "Containers",
        "module": "Common",
        "description": "Instance of a kind",
        "properties": {
            "code": {
                "description": "Natural key",
                "type": "string",
                "isUnique": true,
                "isRequired": true
            },
            "description": {
                "description": "Description",
                "type": "string"
            },
            "note": {
                "description": "Note",
                "type": "string"
            },
            "kind": {
                "description": "Node kind",
                "type": {
                    "relation": "Kind",
                    "properties": ["code", "description", "type"]
                },
                "isRequired": true
            }
        }
    },
    {
        "name": "Node",
        "plural": "Nodes",
        "module": "Common",
        "description": "Base class for hiearchy support",
        "inherits": "Container",
        "properties": {
            "parent": {
                "description": "Parent container",
                "type": {
                    "relation": "Container",
                    "properties": ["code", "description", "kind"],
                    "isRequired": true
                }
            }
        }
    },
    {
        "name": "NodeBalance",
        "plural": "NodeBalances",
        "module": "Common",
        "description": "Base class for hiearchy support",
        "inherits": "Node",
        "properties": {
            "balance": {
                "description": "Current quantity",
                "type": "number"
            },
            "unit": {
                "description": "Unit of measure",
                "type": {
                    "relation": "Unit",
                    "properties": ["code", "description", "type"]
                },
                "isRequired": true,
                "default": {
                    "id": "each"
                }
            }
        }
    },
    {
        "name": "Period",
        "plural": "Periods",
        "module": "Common",
        "description": "Base class for bucketed time period support",
        "properties": {
            "name": {
                "description": "Name",
                "type": "string"
            },
            "start": {
                "description": "Start date",
                "type": "string",
                "format": "date"
            },
            "end": {
                "description": "End date",
                "type": "string",
                "format": "date"
            },
            "isFrozen": {
                "description": "Period is frozen for transactions.",
                "type": "boolean",
                "isReadOnly": true
            },
            "isClosed": {
                "description": "Period is closed.",
                "type": "boolean",
                "isReadOnly": true
            }
        }
    },
    {
        "name": "NodePeriodBalance",
        "plural": "NodePeriodBalance",
        "module": "Common",
        "inherits": "NodeBalance",
        "description": "Quantity of objects in node per period",
        "properties": {
            "period": {
                "description": "Period",
                "type": {
                    "relation": "Period",
                    "properties": ["name", "start", "end", "isFrozen", "isClosed"]
                }
            },
            "debits": {
                "description": "Sum of debits in the period",
                "type": "number"
            },
            "credits": {
                "description": "Sum of credits in the period",
                "type": "number"
            }
        }
    },
    {
        "name": "Action",
        "plural": "Action",
        "module": "Common",
        "description": "Abstract action",
        "properties": {
            "kind": {
                "description": "Object action is taken on",
                "type": {
                    "relation": "Kind",
                    "properties": ["code", "description"]
                },
                "isRequired": true
            },
            "date": {
                "description": "Action date",
                "type": "string",
                "format": "date",
                "default": "today()"
            },
            "note": {
                "description": "Note",
                "type": "string"
            }
        }
    },
    {
        "name": "Distribution",
        "plural": "Distributions",
        "module": "Common",
        "description": "Action distribution",
        "properties": {
            "parent": {
                "description": "Parent",
                "type": {
                    "relation": "Action",
                    "childOf": "distributions"
                }
            },
            "node": {
                "description": "Object container",
                "type": {
                    "relation": "Node",
                    "properties": ["code", "description", "kind"]
                }
            },
            "debit": {
                "description": "Debit",
                "type": "number"
            },
            "credit": {
                "description": "Credit",
                "type": "number"
            },
            "isPropagation": {
                "description": "Parent propagation",
                "type": "boolean",
                "default": false
            }
        }
    },
    {
        "name": "Request",
        "plural": "Requests",
        "module": "Common",
        "description": "Action request",
        "inherits": "Action",
        "properties": {
            "isPosted": {
                "description": "Transaction is complete",
                "type": "boolean",
                "default": false,
                "isReadOnly": true
            }
        }
    },
    {
        "name": "Transaction",
        "plural": "Transactions",
        "module": "Common",
        "description": "Action history",
        "inherits": "Action",
        "properties": {
            "number": {
              "description": "Transaction number",
              "type": "string",
              "isUnique": true,
              "isRequired": true
            },
            "parent": {
                "description": "Parent action",
                "type": {
                    "relation": "Request",
                    "properties": ["kind", "date"]
                }
            }
        }
    },
    {
        "name": "Conversion",
        "plural": "Conversions",
        "module": "Common",
        "description": "Conversion rates",
        "properties": {
            "kind": {
              "description": "Transaction number",
              "type": {
                "relation": "Kind",
                "properties": ["code", "description"]
              },
              "isRequired": true
            },
            "element": {
              "description": "Element",
              "type": {
                "relation": "Element",
                "properties": ["code", "description"]
              }
            },
            "fromNode": {
                "description": "From node",
                "type": {
                    "relation": "Node",
                    "properties": ["kind"]
                }
            },
            "fromQuantity": {
                "description": "From quantity bound",
                "type": "number",
                "isRequired": true
            },
            "fromUnit": {
                "description": "Quantity unit",
                "type": {
                  "relation": "Unit",
                  "properties": ["code", "description"]
                },
                "isRequired": true,
                "default": {
                    "id": "each"
                }
            },
            "toNode": {
                "description": "To node",
                "type": {
                    "relation": "Node",
                    "properties": ["kind"]
                }
            },
            "toQuantity": {
                "description": "To fixed quantity",
                "type": "number",
                "isRequired": true
            },
            "toUnit": {
                "description": "Amount unit",
                "type": {
                  "relation": "Unit",
                  "properties": ["code", "description"]
                },
                "isRequired": true
            },
            "toRatio": {
                "description": "To ratio",
                "type": "number",
                "default": 1,
                "isRequired": true
            },
            "effective": {
                "description": "Effective date",
                "type": "string",
                "format": "date",
                "isRequired": true
            },
            "transact": {
                "description": "Process flag",
                "type": "string",
                "isRequired": true,
                "default": "Prompt"
            }
        }
    }
]
